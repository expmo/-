# 量化交易

## 策略

5日均线上穿60日均线，监控

5日均线下穿26日均线，卖一半。提醒

5日均线下穿60日均线，清仓。提醒

## 方案



基础数据表结构

```sql




ALTER TABLE `lx_qt`.`qt_stock_basic` 
MODIFY COLUMN `ts_code` varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL FIRST,
ADD PRIMARY KEY (`ts_code`);

ALTER TABLE `lx_qt`.`qt_trade_cal` 
MODIFY COLUMN `exchange` varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL FIRST,
MODIFY COLUMN `cal_date` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL AFTER `exchange`;

ALTER TABLE `lx_qt`.`qt_trade_cal` 
MODIFY COLUMN `exchange` varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL FIRST,
MODIFY COLUMN `cal_date` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL AFTER `exchange`,
ADD UNIQUE INDEX `uk_exchange-trade_date`(`exchange`, `cal_date`);

ALTER TABLE `lx_qt`.`qt_trade_cal` 
ADD INDEX `idx-exchange`(`exchange`);

ALTER TABLE `lx_qt`.`qt_trade_cal` 
ADD INDEX `idx-cal_date`(`cal_date`);


ALTER TABLE `lx_qt`.`qt_daily` 
MODIFY COLUMN `ts_code` varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL FIRST,
MODIFY COLUMN `trade_date` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL AFTER `ts_code`;

ALTER TABLE `lx_qt`.`qt_daily` 
ADD UNIQUE INDEX `uk-ts_code-trade_date`(`ts_code`, `trade_date`);


ALTER TABLE `lx_qt`.`qt_daily` 
ADD INDEX `idx-ts_code`(`ts_code`);

ALTER TABLE `lx_qt`.`qt_daily` 
ADD INDEX `idx-trade_date`(`trade_date`);




```





脚本

```sql

CREATE TABLE `qt_strategy_trace` (
  `id` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL COMMENT 'id',
  `create_by` varchar(64) DEFAULT NULL COMMENT '创建人',
  `create_date` datetime DEFAULT NULL COMMENT '创建时间',
  `update_by` varchar(64) DEFAULT NULL COMMENT '更新人',
  `update_date` datetime DEFAULT NULL COMMENT '更新时间',
  `remarks` varchar(255) DEFAULT NULL COMMENT '备注信息',
  `del_flag` varchar(1) DEFAULT NULL COMMENT '逻辑删除标志',
  `strategy_code` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL COMMENT '策略id',
	`strategy_name` varchar(127) DEFAULT NULL COMMENT '策略名称',
	`hit_date` varchar(20) DEFAULT NULL COMMENT '命中日期（格式YYYYMMDD）',
	`ts_code` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL COMMENT '代码',
  `symbol` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL COMMENT '标识',
  `name` varchar(127) DEFAULT NULL COMMENT '名称',
  `b_price` DECIMAL(64,4) DEFAULT NULL COMMENT '买入价',
  `s1_date` varchar(20) DEFAULT NULL COMMENT 'S1日期（格式YYYYMMDD）',
  `s1_price` DECIMAL(64,4) DEFAULT NULL COMMENT 'S1价格',
	`s2_date` varchar(20) DEFAULT NULL COMMENT 'S2日期（格式YYYYMMDD）',
  `s2_price` DECIMAL(64,4) DEFAULT NULL COMMENT 'S2价格',
	`latest_price` DECIMAL(64,4) DEFAULT NULL COMMENT '最新价',
	`latest_trade_date` varchar(20) DEFAULT NULL COMMENT '最新交易日（格式YYYYMMDD）',
	
	`s1_increase_rate` DECIMAL(64,4) DEFAULT NULL COMMENT '距S1涨幅（%）',
	`s2_increase_rate` DECIMAL(64,4) DEFAULT NULL COMMENT '距S2涨幅（%）',
	`latest_increase_rate` DECIMAL(64,4) DEFAULT NULL COMMENT '距今日涨幅（%）',
			

  PRIMARY KEY (`id`),
  KEY `inx_ts_code` (`ts_code`),
  KEY `inx_symbol` (`symbol`),
	KEY `inx_hit_date` (`hit_date`),
  KEY `inx_strategy_code` (`strategy_code`),
  KEY `idx_strategy_name` (`strategy_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='策略跟踪';

```

