# 量化交易

## 策略

5日均线上穿60日均线，监控

5日均线下穿26日均线，卖一半。提醒

5日均线下穿60日均线，清仓。提醒

## 方案



基础数据表结构

```sql

CREATE TABLE "qt_stock_basic" (
  "ts_code" varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
  "symbol" text,
  "name" text,
  "area" text,
  "industry" text,
  "fullname" text,
  "enname" text,
  "market" text,
  "exchange" text,
  "curr_type" text,
  "list_status" text,
  "list_date" text,
  "delist_date" text,
  "is_hs" text,
  PRIMARY KEY ("ts_code")
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4;

CREATE TABLE "qt_trade_cal" (
  "exchange" varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  "cal_date" varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  "is_open" bigint(20) DEFAULT NULL,
  PRIMARY KEY ("exchange","cal_date"),
  KEY "idx-exchange" ("exchange"),
  KEY "idx-cal_date" ("cal_date")
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4;

CREATE TABLE "qt_adj_factor" (
  "ts_code" varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
  "trade_date" varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
  "adj_factor" double DEFAULT NULL,
  PRIMARY KEY ("ts_code","trade_date"),
  KEY "idx-ts_code" ("ts_code"),
  KEY "idx-trade_date" ("trade_date")
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4;

CREATE TABLE "qt_daily_basic" (
  "ts_code" varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
  "trade_date" varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
  "close" double DEFAULT NULL,
  "turnover_rate" double DEFAULT NULL,
  "turnover_rate_f" double DEFAULT NULL,
  "volume_ratio" text COLLATE utf8mb4_bin,
  "pe" text COLLATE utf8mb4_bin,
  "pe_ttm" text COLLATE utf8mb4_bin,
  "pb" text COLLATE utf8mb4_bin,
  "ps" text COLLATE utf8mb4_bin,
  "ps_ttm" text COLLATE utf8mb4_bin,
  "dv_ratio" text COLLATE utf8mb4_bin,
  "dv_ttm" text COLLATE utf8mb4_bin,
  "total_share" double DEFAULT NULL,
  "float_share" double DEFAULT NULL,
  "free_share" double DEFAULT NULL,
  "total_mv" double DEFAULT NULL,
  "circ_mv" double DEFAULT NULL,
  PRIMARY KEY ("ts_code","trade_date"),
  KEY "idx-ts_code" ("ts_code"),
  KEY "idx-trade_date" ("trade_date")
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;

CREATE TABLE "qt_daily" (
  "ts_code" varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  "trade_date" varchar(20) CHARACTER SET utf8 utf8mb4 utf8mb4_bin DEFAULT NULL,
  "open" double DEFAULT NULL,
  "high" double DEFAULT NULL,
  "low" double DEFAULT NULL,
  "close" double DEFAULT NULL,
  "pre_close" double DEFAULT NULL,
  "change" double DEFAULT NULL,
  "pct_chg" double DEFAULT NULL,
  "vol" double DEFAULT NULL,
  "amount" double DEFAULT NULL,
  PRIMARY KEY ("ts_code","trade_date"),
  KEY "idx-ts_code" ("ts_code"),
  KEY "idx-trade_date" ("trade_date")
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4;




CREATE TABLE "pro_bar" (
  "trade_date" varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
  "ts_code" varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
  "open" double DEFAULT NULL,
  "high" double DEFAULT NULL,
  "low" double DEFAULT NULL,
  "close" double DEFAULT NULL,
  "pre_close" double DEFAULT NULL,
  "change" double DEFAULT NULL,
  "pct_chg" double DEFAULT NULL,
  "vol" double DEFAULT NULL,
  "amount" double DEFAULT NULL,
  "turnover_rate" double DEFAULT NULL,
  "volume_ratio" double DEFAULT NULL,
  "adj_factor" double DEFAULT NULL,
  PRIMARY KEY ("ts_code","trade_date"),
  KEY "idx_ts_code" ("ts_code"),
  KEY "idx_trade_date" ("trade_date")
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4;





```





脚本

```sql

CREATE TABLE `qt_strategy_trace` (
  `id` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL COMMENT 'id',
  `create_by` varchar(64) DEFAULT NULL COMMENT '创建人',
  `create_date` datetime DEFAULT NULL COMMENT '创建时间',
  `update_by` varchar(64) DEFAULT NULL COMMENT '更新人',
  `update_date` datetime DEFAULT NULL COMMENT '更新时间',
  `remarks` varchar(255) DEFAULT NULL COMMENT '备注信息',
  `del_flag` varchar(1) DEFAULT NULL COMMENT '逻辑删除标志',
  `strategy_code` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL COMMENT '策略id',
	`strategy_name` varchar(127) DEFAULT NULL COMMENT '策略名称',
	`hit_date` varchar(20) DEFAULT NULL COMMENT '命中日期（格式YYYYMMDD）',
	`ts_code` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL COMMENT '代码',
  `symbol` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL COMMENT '标识',
  `name` varchar(127) DEFAULT NULL COMMENT '名称',
  `b_price` DECIMAL(64,4) DEFAULT NULL COMMENT '买入价',
  `s1_date` varchar(20) DEFAULT NULL COMMENT 'S1日期（格式YYYYMMDD）',
  `s1_price` DECIMAL(64,4) DEFAULT NULL COMMENT 'S1价格',
	`s2_date` varchar(20) DEFAULT NULL COMMENT 'S2日期（格式YYYYMMDD）',
  `s2_price` DECIMAL(64,4) DEFAULT NULL COMMENT 'S2价格',
	`latest_price` DECIMAL(64,4) DEFAULT NULL COMMENT '最新价',
	`latest_trade_date` varchar(20) DEFAULT NULL COMMENT '最新交易日（格式YYYYMMDD）',
	
	`s1_increase_rate` DECIMAL(64,4) DEFAULT NULL COMMENT '距S1涨幅（%）',
	`s2_increase_rate` DECIMAL(64,4) DEFAULT NULL COMMENT '距S2涨幅（%）',
	`latest_increase_rate` DECIMAL(64,4) DEFAULT NULL COMMENT '距今日涨幅（%）',
			

  PRIMARY KEY (`id`),
  KEY `inx_ts_code` (`ts_code`),
  KEY `inx_symbol` (`symbol`),
	KEY `inx_hit_date` (`hit_date`),
  KEY `inx_strategy_code` (`strategy_code`),
  KEY `idx_strategy_name` (`strategy_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='策略跟踪';

```

